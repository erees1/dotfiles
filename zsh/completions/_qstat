#compdef qstat

# AUTOCOMPLETION FOR ZSH
# Reference: https://zsh.sourceforge.io/Doc/Release/Completion-Widgets.html

local -a opts
list="$(/usr/bin/qstat | tail -n +3 | awk '{print $1}' | uniq)"

setopt shwordsplit
for item in $list; do
    description=${$(qlog $item)#"/exp/edwardr/"}
    opts+=("$item:$description")
done

_describe 'command' opts
